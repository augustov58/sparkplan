# THIS IS A GUIDE TO DOCUMENT THE KNOWN PROBLEMS IN THE APP.

## I WILL DOCUMENT KNOW PROBLEMS BELOW THAT I FIND AND NEED FIXING. ALWAYS REFER TO IT MARK COMPLETE ONCE A FIX IS APPLIED AND MARK [X] FOR COMPLETED

## ISSUES:
- [X] BULK CIRCUIT ADDITION DOES NOT WORK PROPERLY. WHEN CIRCUITS ARE ADDED IN BULK THEY DON'T SHOW IN THE PANEL SCHEDULE THEY WERE ADDED. SOMETIMES IT SHOWS THEY CIRCUIT # IN () CORRECT AND THE LOAD BUT THE CIRCUITS DON'T SHOW. **FIXED 2025-12-02** - Added optimistic updates to useCircuits hook + database migration for unique constraint. See CIRCUIT_DISPLAY_FIX.md
- [X] WHEN ADDING A CIRCUIT MANUALLY THE SAME HAPPENS. WHEN YOU ADD THE FIRST ONE IT WORKS BUT THEN THE SECOND ONE DOES NOT WORK AND IT SHOWS THE TOTAL LOAD TOO. **FIXED 2025-12-02** - Same fix as above. Circuits now appear instantly with optimistic updates.
- [X] CIRCUITS WITH 2 OR 3 PONES SHOULD BE ABLE TO OCCUPY 2 OR 3 POLES TOGETHER IN THE PANEL SCHEDULE. THERE IS NO POSIBILITY OF REMOVING CIRCUITS INDIVIDUALLY, ONLY EDITING THE DESCRIPTION IN THE PANEL SCHEDULE. I NEED TO BE ABLE TO DELETE THEM COMPLETELY AND MODIFY LOAD IF NECESSARY(NOT ONLY THE NAME) **FIXED 2025-12-02** - Multi-pole circuits now show visual badges (2P/3P) and occupy multiple slots with continuation indicators. Added delete button (trash icon on hover) for all circuits. Added load_watts editing capability. See PANEL_SCHEDULE_ENHANCEMENTS.md
- [X] I NOTICE THE FOLLOWING: WHEN ADDING ONE PANEL TO THE MDP (SAY 'LP') I CAN'T ADD ANOTHER PANEL TO THAT LP DOWNSTREAM IT GETS ADDED IN THE LIST BUT NOT IN THE RISER DIAGRAM. **FIXED 2025-12-03** - Implemented recursive rendering for cascading panel hierarchies. One-line diagram now shows unlimited depth: MDP → Panel → Subpanel → etc., and transformers at any level with their downstream panels. See CASCADING_HIERARCHY_FIX.md 
- [X] PROGRAM IS ALLOWING TO ADD PANELS OR ELEMENTS THAT ARE NOT COMPATIBLE. FOR EXAMPLE IT ALLOWS YOU TO ADD A 208V 3PH PANEL DIRECTLY TO A 480V 3PH PANEL. THIS SHOUDL NOT BE ALLOWED OVERALL SYSTEMS SHOULD BE COMPATIBLE IN ALL THE POSSIBLE COMBINATIONS. YOU CAN'T CONNECT A 3PHASE PANEL TO A SINGLE PHASE PANEL ETC. EVALUATE WITH THE ENGINEER AGENT ALL THE POSSIBLE COMBINATIONS. **FIXED 2025-12-02** - Implemented comprehensive voltage/phase compatibility validation. Blocks dangerous connections (e.g., 480V→208V without transformer), warns about unusual configurations (e.g., high-leg delta), allows valid connections (same voltage/phase, line-to-neutral derivatives). See VOLTAGE_PHASE_VALIDATION.md 
- [] ONCE THE FEEDER IS CREATED BETWEEN 2 PANELS IT SHOULD ALSO UPDATE IF THE LOAD IS CHANGED IN THE PANEL LATER ON AND IT IS NOT DOING IT. OR AT LEATS A NOTIFICATION SAYING THAT THE LOAD WAS UPDATED. 
- [] THERE SHOULD BE NO WAY OF CREATING A FEEDER FOR PANELS THAT ARE NOT CONNECTED. FOR EXAMPLE IF I CREATE PANEL LP(480V) FED FROM MDP(480V) AND THEN CREATE A PP(208V) FED THROUGH A XFMR TO MDP. THE PROGRAM SHOULD NOT BE ABLE TO CREATE A FEEDER FROM LP TO PP PANELS. CONSULT THE ENGINEER AGEN FOR THE BEST RESULT.
- [X] PANEL MDP SHOULD BE ABLE TO BE ELIMINATED ONCE CREATED. **FIXED 2025-12-02** - MDP can now be deleted with strong warning message (no longer blocked). User must confirm understanding that deleting the only MDP removes service entrance. See PANEL_SCHEDULE_ENHANCEMENTS.md
- [X] WHEN CREATING A TRANSFORMER OR ADDING A PANEL CONNECTED TO ANOTHER PANEL IT CREATES BUT IT DOES NOT SHOW ON THE ONE LINE DIAGRAM. IT SEEMS THE LIMIT IS ONE PANEL AFTER THE BUS FROM THE MDP. **FIXED 2025-12-03** - Same fix as Issue #4 above. Recursive rendering now supports transformers at any panel level (not just MDP), with proper cascading to downstream panels. See CASCADING_HIERARCHY_FIX.md


##### NOTE: NOTIFY THE USER IF A MODIFICATION OF THE SUPABASE IS NEEDED WHEN FIXING ANY PROBLEM OR DOING ANY MODIFICATION. THE USER IS USING THE *.SQL FILES FROM THE REPO LOCATION. ALWAYS CONSULT THE AGENTS TO MAP THE PROBLEM AND PERFORM THE BEST POSSIBLE SOLUTION BEFORE APPLYING THE FIX.