# GEMINI.md: AI Assistant Context

This document provides essential context about the NEC Pro Compliance project for AI assistants.

## Project Overview

**NEC Pro Compliance** is a database-first, real-time, single-page SaaS application designed for electrical engineers and electricians to manage and validate electrical system designs against the National Electrical Code (NEC).

The application is built with a modern web stack, prioritizing data integrity, real-time collaboration, and a reactive user experience.

### Core Technologies

*   **Frontend:** React 19, TypeScript, Vite
*   **Backend & Database:** Supabase (PostgreSQL)
*   **Styling:** Tailwind CSS
*   **State Management:** Custom React hooks with real-time subscriptions (powered by Supabase). The project intentionally avoids global state managers like Redux or Zustand.
*   **Routing:** `react-router-dom` using `HashRouter` for compatibility with static hosting platforms like GitHub Pages.
*   **Testing:** `vitest`

### Architecture

The architecture is **database-first**, where the Supabase PostgreSQL database is the single source of truth.

*   **Real-time Synchronization:** The frontend uses Supabase's real-time capabilities to subscribe to database changes. This ensures that the UI is always up-to-date and enables multi-user collaboration.
*   **Optimistic UI:** UI updates are applied immediately on the client-side for a fluid user experience, with the database state eventually providing consistency.
*   **Custom Hooks:** Data fetching and state management are encapsulated within custom hooks (e.g., `useProjects`, `usePanels`, `useCircuits`). These hooks manage data fetching, real-time subscriptions, and CRUD operations.
*   **Component Structure:** The project follows a feature-based component organization (e.g., `components/LoadCalculator.tsx`, `components/PanelSchedule.tsx`).

## Building and Running the Project

### Prerequisites

*   Node.js
*   A Supabase project
*   A Gemini API key

### Setup

1.  **Install Dependencies:**
    ```bash
    npm install
    ```

2.  **Environment Variables:**
    Create a `.env.local` file by copying `.env.example`. Populate it with your Supabase URL, Supabase anon key, and Gemini API key.

3.  **Database Schema:**
    Apply the database schema located at `supabase/schema.sql` to your Supabase project via the Supabase SQL Editor.

### Key Commands

*   **Run in development mode:**
    ```bash
    npm run dev
    ```

*   **Build for production:**
    ```bash
    npm run build
    ```

*   **Run tests:**
    ```bash
    npm run test
    ```

*   **Run tests in watch mode:**
    ```bash
    npm run test:watch
    ```

## Development Conventions

### Coding Style

*   **TypeScript:** The project uses strict TypeScript.
*   **File Structure:** Code is organized by feature under the `components`, `hooks`, `services`, and `data` directories.
*   **Naming Conventions:**
    *   Components: `PascalCase.tsx`
    *   Hooks: `useCamelCase.ts`
    *   Types: `types.ts` or co-located in the feature directory.

### Database

*   The database schema is defined in `supabase/schema.sql`.
*   Row Level Security (RLS) is enabled on all tables to ensure data privacy.
*   Database types are auto-generated by the Supabase CLI, but for now, they are manually defined in `lib/database.types.ts`.

### State Management

*   State is managed by custom hooks that interface with the Supabase backend.
*   Avoid introducing global state management libraries. Use React Context for sharing data that is not managed by a custom data hook.

### Testing

*   Unit and integration tests are written with `vitest`.
*   Tests for calculation logic are located in `tests/calculations.test.ts`.
*   Component tests should be co-located with the component or in the `tests` directory.
